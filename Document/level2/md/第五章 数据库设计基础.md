# 第五章 数据库设计基础

## 5.1 数据库系统的基本概念
### 5.1.1 数据、数据库、数据库管理系统
1. 数据(data)：数据实际上就是描述事物的符号记录。
2. 数据库(database,DB)：是数据的集合，它具有统一的结构形式并存放与统一的存储介质内，是多种应用数据的集成，并可被各个应用程序所共享。
3. 数据库管理系统(database management system,DBMS)：是数据库机构，它是一种系统软件，负责数据库中的数据组织、数据操纵、数据维护、控制及保护和数据服务等。

**数据库管理系统功能：**

1. 数据模式定义
2. 数据存取的物理构建
3. 数据操纵
4. 数据的完整性、安生性定义与检查  
5. 数据库的并发控制与故障恢复  
6. 数据的服务

为完成以上六个功能，数据库管理系统一般提供相应的数据语言(data language)：

1. 数据定义语言(data definition language,DDL)。
2. 数据操纵语言(data manipulation language,DML)。
3. 数据控制语言(data control lanuage,DCL)。


### 5.1.2 数据库系统的发展
1. 人工管理阶段
2. 文件系统阶段
3. 数据库系统阶段

### 5.1.3 数据库系统的基本特点
1. 数据的高集成性。
2. 数据的高共享性与低冗余性。
3. 数据独立性：  
    （数据独立性一般分为物理独立性与逻辑独立性两级。）
    * 物理独立性：物理独立性即是数据的物理结构(包括存储结构，存取方式等)的改变，如存储设备的更换、物理存储的更换、存取方式改变等都不影响数据库的逻辑结构，从而不致引起应用程序的变化。
    * 逻辑独立性：数据库总体逻辑结构的改变，如修改数据模式、增加新的数据类型、改变数据间联系等，不需要相应修改应用程序，这就是数据的逻辑独立性。
4. 数据统一管理与控制。

### 5.1.4 数据库系统的内部结构体系

**数据库系统的三级模式：**
1. 概念模式：数据库系统中全局数据逻辑结构的描述，是全体用户(应用)公共数据视图。
2. 外模式：也称子模式或用户模式，它是用户的数据视图，也就是用户所见到的数据模式，它由概念模式推导而出。
3. 内模式：又称物理模式，它给出了数据库物理存储结构与物理存取方法。内模式的物理性主要体现在操作系统及文件级上，它还未深入到设备级上(如磁盘及磁盘操作)。内模式对一般用户是透明的，但它的设计直接影响数据库的性能。

**数据库系统的两级映射：**
1. 概念模式/内模式的映射：实现了概念模式到内模式之间的相互转换。当数据库的存储结构发生变化时，通过修改相应的概念模式/内模式的映射，使得数据库的逻辑模式不变，其外模式不变，应用程序不用修改，从而保证数据具有很高的物理独立性。
2. 外模式/概念模式的映射：实现了外模式到概念模式之间的相互转换。当逻辑模式发生变化时，通过修改相应的外模式/逻辑模式映射，使得用户所使用的那部分外模式不变，从而应用程序不必修改，保证数据具有较高的逻辑独立性。


## 5.2 数据模型

### 5.2.1 数据模型的基本概念
数据模型所描述的内容有三个部分：
1. 数据结构
2. 数据操作
3. 数据约束

数据模型按不同的应用层次分为三种类型：
1. 概念数据模型：对客观世界复杂事物结构描述及它们之间内在联系的刻画。
2. 逻辑数据模型：面向数据库系统的模型。
3. 物理数据模型：面向计算机物理表示的模型。



### 5.2.2 E-R 模型
长期以来被广泛使用的概念模型是 ==E-R 模型==(entity-relationship model)(实体联系模型)
1. 实体集：用矩形表示。
2. 属性：用椭圆形表示。
3. 联系：用菱形表示。
4. 实体集与属性间的联接关系：用无向线段表示。
5. 实体集与联系间的联接关系：用无向线段表示。


数据库管理系统常见的数据模型有：==层次模型、网状模型和关系模型==三种。

## 5.3 关系代数

### 5.3.1 关系模型的基本运算

1. 插入
2. 删除
3. 修改
4. 查询
   1. 投影
   2. 选择
   3. 笛卡尔积



### 5.3.2 关系代数中的扩充运算

1. 交运算
2. 除运算：笛卡尔积的逆运算
3. 连接与自然连接运算



## 5.4 数据库设计与管理
数据库设计阶段包括：需求分析、概念分析、逻辑设计、物理设计。

数据库设计的每个阶段都有各自的任务：
1. 需求分析阶段：这是数据库设计的第一个阶段，任务主要是收集和分析数据，这一阶段收集到的基础数据和数据流图是下一步设计概念结构的基础。
2. 概念设计阶段：分析数据间内在语义关联，在此基础上建立一个数据的抽象模型，即形成E-R图。
3. 逻辑设计阶段：将E-R图转换成指定RDBMS中的关系模式。
4. 物理设计阶段：对数据库内部物理结构作调整并选择合理的存取路径，以提高数据库访问速度及有效利用存储空间。